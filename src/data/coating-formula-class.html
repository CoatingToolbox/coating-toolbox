<script>
    class CoatingFormula {

        constructor(parameters={}) {
            this.density = 1100000;
            this.solids = 0.2;
            this.productName = 'Opadry II';
            this.formulaName = '85F18422';
            this.type = 'aesthetic';
            this.color = 'White';

            this.viscosityIntercept = 20;
            this.viscosityExponent = 10;
            
            Object.getOwnPropertyNames(this).map(name => {
                if(!parameters[name]) { return }
                this[name] = parameters[name];
            });
        }
        
        toJSON() {
            return {
                density: this.density,
                solids: this.solids,
                productName: this.productName,
                formulaName: this.formulaName,
                type: this.type,
                color: this.color,
                viscosityExponent: this.viscosityExponent,
                viscosityIntercept: this.viscosityIntercept,
                viscosity: this.viscosity
            };
        }
        
        
        get viscosity() {
            return this.viscosityIntercept * Math.exp(this.viscosityExponent * this.solids);
        }
        set viscosity(viscosity) {
            this.solids = Math.log(this.viscosity / this.viscosityIntercept) / this.viscosityExponent;
        }
        
        // get coatingWeight() {
        //     return this.tabletWeight * this.weightGain;
        // }
        
        // set coatingWeight(val) {
        //     this.weightGain = val / this.tabletWeight;
        // }

        // get filmThickness() {
        //     // (grams / meters^2) / (grams / meters^3) = meters
        //     return this.coatingCoverage / this.density;
        // }

        // set filmThickness(val) {
        //     this.coatingCoverage = val * this.density;
        // }

        // get coatingCoverage() {
        //     // grams * percent / meters^2 = grams / meters^2
        //     return this.coatingWeight / this.tabletArea;
        // }

        // set coatingCoverage(val) {
        //     this.coatingWeight = val * this.tabelArea;
        // }
    }
</script>