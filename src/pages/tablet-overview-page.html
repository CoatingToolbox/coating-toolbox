
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../elements/page-header.html">
<link rel="import" href="../elements/home-page-card.html">
<link rel="import" href="../elements/icon-label-item.html">
<link rel="import" href="../elements/tablet-graphic.html">
<link rel="import" href="../redux/redux-mixin.html">

<dom-module id="tablet-overview-page">
  
   <template>
    
    <style>
      :host {
        display: block;
      }
      #content-layout {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-auto-rows: auto;
        grid-gap: 32px 48px;
        max-width: 932px;
        margin: auto;
        padding: 48px 16px;
      }
      
      #page-title {
        grid-column: 1 / 4;
        grid-row: 1 / 2; 
        color: var(--text-light-color);
        @apply --paper-font-display1;
      }
      /*Description Card styles*/
      home-page-card[title="Description"] {
        grid-column: 1 / 4;
        grid-row: 2 / 3;
      }
      #description-layout {
        display: grid;
        grid-template-columns: auto 1fr 1fr;
        grid-template-rows: repeat(3, auto);
        grid-gap: 8px 24px;
        align-items: center;
        padding: 64px 64px;
      }
      #description-icon {
        grid-column: 1 / 2;
        grid-row: 1 / 4;
        @apply --paper-font-display1;
        color: var(--text-color);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: url("../../../images/colorcon logo tablet.jpg");
        background-size: cover;
        border-radius: 50%;
        border: 8px solid var(--border-color);
        box-shadow: inset 0 0 15px var(--border-color);
        width: 175px;
        height: 175px;
      }
      #description-title {
        grid-column: 2 / 4;
        grid-row: 1 / 2;
        align-self: end;
        @apply --paper-font-display2;
        color: var(--app-primary-color);
      }
      
      /*Dimension Layouts*/
      home-page-card[title="Dimensions"] {
        grid-column: 1 / 2;
        grid-row: 3 / 4;
      }
      home-page-card[title="Formulation"] {
        grid-column: 2 / 3;
        grid-row: 3 / 4;
      }
      home-page-card[title="Calcualtions"] {
        grid-column: 3 / 4;
        grid-row: 3 / 4;
      }
      home-page-card[title="Tablet Schematic"] {
        grid-column: 1 / 3;
        grid-row: 4 / 5;
      }
      /*Schematic Styles*/
      #schematic-layout {
        grid-row: 4 / 5;
        grid-column: 1 / 4;
        align-self: center;
        justify-self: center;
        display: flex;
        border-radius: 16px;
        background-color: var(--gray-color);
        border: 5px solid var(--border-color);
        padding: 8px 16px 16px 16px;
        margin: 24px auto;
      }
      .graphic-layout {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      tablet-graphic {
        width: 175px;
        height: 175px;
      }
      .schematic-label {
        @apply --paper-font-subhead;
        text-align: center;
      }
      
      [hidden] {
        display: none;
      }
    </style>
    <page-header title='Materials & Equipment' icon='my-icons:mix'></page-header>
    <div id='content-layout'>
      <div id='page-title'>Tablet Overview</div>
      <home-page-card title='Description'>
        <div id='description-layout'>
          <div id='description-icon'></div>
          <div id='description-title'>[[tablet.productName]]</div>
          <icon-label-item 
            label='Company' 
            value='[[tablet.companyName]]' 
            icon='my-icons:company'></icon-label-item>
          <icon-label-item 
            label='Formulation' 
            value='[[tablet.formulationName]]' 
            icon='my-icons:product'></icon-label-item>
          <icon-label-item 
            label='Contact' 
            value='[[tablet.contactName]]' 
            icon='my-icons:contact'></icon-label-item>
          <icon-label-item 
            label='Location' 
            value='[[tablet.locationName]]' 
            icon='my-icons:location'></icon-label-item>
        </div>
      </home-page-card>
      <home-page-card title='Dimensions'>
        <icon-label-item 
            label='Shape' 
            value='[[_getShapeString(tablet.shape)]]' 
            icon='[[_getShapeIcon(tablet.shape)]]'></icon-label-item>
          <icon-label-item 
            label='Dimensions' 
            value='[[_getDimensionString(tablet.shape, tablet.length, tablet.width)]]' 
            icon='my-icons:ruler'></icon-label-item>
          <icon-label-item 
            label='Thickness' 
            value='[[_getThicknessString(tablet.totalThickness)]]' 
            icon='my-icons:ruler'></icon-label-item>
      </home-page-card>
      <home-page-card title='Formulations'>
        <icon-label-item 
            label='Weight' 
            value='[[_getWeightString(tablet.weight)]]' 
            icon='my-icons:weight'></icon-label-item>
          <icon-label-item 
            label='Bulk Density' 
            value='[[_getDensityString(tablet.bulkDensity)]]' 
            icon='my-icons:density'></icon-label-item>
      </home-page-card>
      <home-page-card title='Calcualtions'>
        <icon-label-item 
            label='Surface Area' 
            value='[[_getSurfaceAreaString(tablet.surfaceArea)]]' 
            icon='my-icons:surface-area'></icon-label-item>
          <icon-label-item 
            label='Volume' 
            value='[[_getVolumeString(tablet.volume)]]' 
            icon='my-icons:volume'></icon-label-item>
          <icon-label-item 
            label='Compressed Density' 
            value='[[_getDensityString(tablet.compressedDensity)]]' 
            icon='my-icons:density'></icon-label-item>
      </home-page-card>
      <home-page-card title='Tablet Schematic'>
        <div id='schematic-layout'>
          <div class='graphic-layout'>
            <tablet-graphic top-view shape='[[tablet.shape]]' length='[[tablet.length]]' width='[[tablet.width]]' band-thickness='[[tablet.bandThickness]]' cup-thickness='[[tablet.cupThickness]]'></tablet-graphic>
            <div class='schematic-label'>Top View</div>
          </div>
          <div class='graphic-layout'>
            <tablet-graphic length-view shape='[[tablet.shape]]' length='[[tablet.length]]' width='[[tablet.width]]' band-thickness='[[tablet.bandThickness]]' cup-thickness='[[tablet.cupThickness]]'></tablet-graphic>
            <div class='schematic-label'>Length View</div>
          </div>
          <div class='graphic-layout' hidden$='[[_isRound(tablet.shape)]]'>
            <tablet-graphic width-view shape='[[tablet.shape]]' length='[[tablet.length]]' width='[[tablet.width]]' band-thickness='[[tablet.bandThickness]]' cup-thickness='[[tablet.cupThickness]]'></tablet-graphic>
            <div class='schematic-label'>Width View</div>
          </div>
        </div>
      </home-page-card>
    </div>
  </template>

  <script>
    class TabletOverviewPage extends ReduxMixin(Polymer.Element) {
      static get is() { return 'tablet-overview-page'; }
      static get properties() {
        return { 
          tablet: { type: Object, statePath: 'tablet' }
        };
      }
      
      _isRound(shape) {
        return (shape === 'round');
      }
      
      _getShapeIcon(shape) {
        return `my-icons:${shape}-tablet`;
      }
      
      _getShapeString(shape) {
        return shape[0].toUpperCase() + shape.substr(1);
      }
      
      _getDimensionString(shape, length, width) {
        // values in meters and need to convert to mm.
        let conv = 1000;
        if(shape === 'round') {
          return `${(length * conv).toFixed(1)} mm`;
        } else {
          return `${(length * conv).toFixed(1)} x ${(width * conv).toFixed(1)} mm`;
        }
      }
      
      _getThicknessString(thickness) {
        // values in meters and need to convert to mm.
        let conv = 1000;
          return `${(thickness * conv).toFixed(1)} mm`;
      }
      
      _getDensityString(density) {
        return `${(density * 1e-6).toFixed(2)} g/ml`;
      }
      
      _getWeightString(weight) {
        return `${(weight * 1000).toFixed(1)} mg`;
      }
      
      _getVolumeString(volume) {
        return `${(volume * 1000000).toFixed(2)} cm3`;
      }
      
      _getSurfaceAreaString(surfaceArea) {
        return `${(surfaceArea * 10000).toFixed(2)} cm2`;
      }
      
      
    }

    window.customElements.define(TabletOverviewPage.is, TabletOverviewPage);
  </script>
</dom-module>
