
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../elements/pages/page-header.html">
<link rel="import" href="../elements/buttons/nav-button.html">

<!--Laxy load sections-->
<link rel="import" href='tablet-card/tablet-card.html'>
<link rel='lazy-import' href="tablet/tablet-overview-section.html">
<link rel='lazy-import' href="tablet/tablet-library-section.html">
<link rel='lazy-import' href="tablet/tablet-designer-section.html">

<dom-module id="tablet-page">
  
   <template>
    
    <style>
      :host {
        display: block;
      }
      
      #navigation-background {
        background-color: var(--white-color);
      }
      #navigation-layout {
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        max-width: 900px;
        margin: auto;
        height: 64px;
      }

    </style>
    
    <app-location route='{{route}}' use-hash-as-path></app-location>

    <app-route
        route="[[route]]"
        pattern="[[rootPath]]tablet/:page"
        data="{{routeData}}">
    </app-route>
    <page-header title='Tablet' icon='my-icons:tablet'>
      <div class='text'>
        The tablet shape, size and formulation effect the coating process
          in many ways. Including the film thickness, coating uniformity and optimal batch size.
      </div>
    </page-header>
    
    <div id='navigation-background'>
      
      <iron-selector 
        id='navigation-layout' selected='[[routeData.page]]' 
        attr-for-selected='data-section' fallback-selection='overview'  
        on-tap='_tabSelected'>
        
        <nav-button label='Tablet Overview' icon='my-icons:info' data-section='overview'></nav-button>
        <nav-button label='Tablet Library' icon='my-icons:library' data-section='library'></nav-button>
        <nav-button label='Tablet Designer' icon='my-icons:edit' data-section='designer'></nav-button>
        
      </iron-selctor>
      
    </div>
  
    <iron-pages selected='[[routeData.page]]' attr-for-selected='section' fallback-selection='overview'>
      <tablet-overview-section section='overview'></tablet-overview-section>
      <tablet-library-section section='library'></tablet-library-section>
      <tablet-designer-section section='designer'></tablet-designer-section>
    </iron-pages>
    
  </template>

  <script>
    class TabletPage extends Polymer.Element {
      static get is() { return 'tablet-page'; }
      static get properties() {
        return {
          route: Object,
          routeData: Object
        };
      }
      
      static get observers() {
        return [
          '_loadSection(routeData.page)'
        ];
      }
      
      _loadSection(section) {
        section = section || 'overview';
        var resolvedPageUrl = this.resolveUrl(`tablet/tablet-${section}-section.html`);
        Polymer.importHref(resolvedPageUrl, null, null, true);
      }
      
      _tabSelected(e) {
        window.location = `#/tablet/${e.target.dataset.section}`;
      }
    }

    window.customElements.define(TabletPage.is, TabletPage);
  </script>
</dom-module>
