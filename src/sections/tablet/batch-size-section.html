
<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../elements/list-unit-input.html">
<link rel="import" href="../../redux/redux-mixin.html">

<dom-module id="batch-size-section">
  <template>
    <style>
      :host {
        display: block;
        padding: 48px 64px 72px 64px;
      }
      .title {
        @apply --paper-font-title;
      }
      #description {
        @apply --paper-font-body1;
        color: var(--text-light-color);
        margin: 16px auto;
        max-width: 600px;
        text-align: justify;
      }
      list-unit-input {
        max-width: 600px;
        margin: auto;
      }
      list-unit-input + list-unit-input {
        border-top: 2px solid var(--border-color);
      }
    </style>
    
    <div class='title'>Volume, Weight and Count</div>
    <div id='description'>
      The batch size of the coating process can be described in different ways. Common values are
      the batch weight and product count. These values are often used out of conveniences but in the 
      coating process we need to understand the batch volume. Based on the tablet weight and bulk density
      we can see how the batch volume, weight and count are related below.
    </div>
    
    <!--<div class='title'>Customize Batch Size</div>-->
    
    <list-unit-input
      icon='my-icons:volume'
      title='Product Volume'
      subtitle='The volume of material.'
      decimals='1'
      selected-units='l'
      type='volume'
      value='[[volume]]'
      on-value-changed='_volumeChanged' >
    </list-unit-input>
    
    <list-unit-input 
      icon='my-icons:weight'
      title='Product Weight'
      subtitle='With a 0.76 g/ml bulk density.'
      decimals='1'
      type='weight'
      selected-units='kg'
      value='[[weight]]'
      on-value-changed='_weightChanged' >
    </list-unit-input>
    
    <list-unit-input
      icon='my-icons:count'
      title='Product Count'
      subtitle='With a 400 mg product weight.'
      decimals='0'
      selected-units='tablets'
      type='count'
      value='[[count]]'
      on-value-changed='_countChanged'>
    </list-unit-input>

  </template>

  <script>
    class BatchSizeSection extends ReduxMixin(Polymer.Element) {
      static get is() { return 'batch-size-section'; }
      
      static get properties() {
        return {
          volume: {type: Number, statePath: "batch.volume"},
          weight: {type: Number, statePath: "batch.weight"},
          count: {type: Number, statePath: "batch.count"},
        };
      }
      
    _countChanged(e) {
      this.dispatch({
        type: "SET_BATCH_COUNT",
        value: e.target.value
      }); 
    }
    _volumeChanged(e) {
      this.dispatch({
        type: "SET_BATCH_VOLUME",
        value: e.target.value
      }); 
    }
    _weightChanged(e) {
      this.dispatch({
        type: "SET_BATCH_WEIGHT",
        value: e.target.value
      }); 
    }
      
    }

    window.customElements.define(BatchSizeSection.is, BatchSizeSection);
  </script>
</dom-module>
