
<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../elements/cards/tagged-toolbar-card.html">
<link rel="import" href="../../elements/charts/viscosity-chart.html">
<link rel="import" href="../../elements/list-items/small-icon-item.html">
<link rel="import" href="../../elements/my-icons.html">
<link rel="import" href="../../redux/redux-mixin.html">

<dom-module id="coating-card">
  
   <template>
    
    <style>
      :host {
        display: flex;
      }
    </style>
        
      
    <tagged-toolbar-card title='Coating'>
      <p class='text' slot='description'>
        With the equipment and materials selected you can now start to plan the 
        coating trial. Key decisions include the batch size to be coated and the 
        amount of coating to apply. Below choose your targets or calculate the recommend values.
      </p>
      <div class='title' slot='item-title'>Opadry II 85F</div>
      <small-icon-item slot='item' label='[[_getSolids(coating.solids)]]' icon='my-icons:volume'></small-icon-item>
      <small-icon-item slot='item' label='[[_getViscosity(coating.viscosity)]]' icon='my-icons:viscosity'></small-icon-item>
      <viscosity-chart slot='graphic' intercept='[[coating.viscosityIntercept]]' exponent='[[coating.viscosityExponent]]' solids='[[coating.solids]]'></viscosity-chart>
      <paper-icon-button icon='my-icons:library' on-click='_openLibrary'  slot='toolbar'></paper-icon-button>
      <paper-icon-button icon='my-icons:edit' on-click='_openEditor'  slot='toolbar'></paper-icon-button>
    </tagged-toolbar-card>
      
      
  </template>

  <script>
    class CoatingCard extends ReduxMixin(Polymer.Element) {
      static get is() { return 'coating-card'; }
      static get properties() {
        return {
          coating: { type: Object, statePath: 'coatingFormula' }
        };
      }
      
      _openLibrary() {
        window.scrollTo(0, 0);
        window.location = '#/coating-library';
      }
      _openEditor() {
        window.scrollTo(0, 0);
        window.location = '#/coating-editor';
      }
      _getSolids(solids) {
        return `${(solids * 100).toFixed(1)} solids`;
      }
      _getViscosity(viscosity) {
        return `${(viscosity).toFixed(0)} cps`;
      }
      
    }

    window.customElements.define(CoatingCard.is, CoatingCard);
  </script>
</dom-module>
