
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="tablet/tablet-overview.html">
<link rel="import" href="tablet/tablet-library.html">
<link rel="import" href="tablet/tablet-design.html">
<link rel="import" href="my-icons.html">

<dom-module id="tablet-page">
  
   <template>
    
    <style>
      :host {
        display: block;
      }
      app-header {
        background-color: var(--app-dark-color);
        color: var(--white-color);
      }
      iron-selector {
        flex-grow: 1;
        height: 100%;
        display: flex;
        flex-direction: row;
        /*height: 64px;*/
        justify-content: flex-end;
        --paper-tabs-selection-bar-color: var(--app-highlight-color);
      }
      .tab {
        display: flex;
        align-items: flex-end;
        padding: 16px;
        margin: 0px 16px;
        border-bottom: 4px solid var(--app-dark-color);
        opacity: 0.6;
        transition: all 0.3s;
        @apply --paper-font-body2;
      }
      .tab:hover {
        cursor: pointer;
        opacity: 1;
        transition: opacity 0.3s;
      }
      .tab.iron-selected {
        opacity: 1;
        transition: all 0.5s;
        border-color: var(--app-highlight-color);
      }
      iron-icon {
        padding-right: 12px;
      }
      iron-pages {
        background: linear-gradient(to bottom, var(--app-primary-color) 360px, var(--background-color) 360px); 
      }
    </style>

    <app-route
        route="[[route]]"
        pattern="/:page"
        data="{{routeData}}">
    </app-route>
    
    <app-header-layout>
        
        <app-header slot='header' reveals effects='waterfall'>
          
          <app-toolbar>
            <paper-icon-button icon='my-icons:arrow-left'></paper-icon-button>
            <div main-title>Coating Substrate</div>
          <iron-selector selected='{{page}}' attr-for-selected='page'>
            <div class='tab' page='overview'>
              <iron-icon icon='my-icons:info'></iron-icon>
              <div>Overview</div>
            </div>
            <div class='tab' page='library'>
              <iron-icon icon='my-icons:library'></iron-icon>
              <div>Library</div></div>
            <div class='tab' page='design'>
              <iron-icon icon='my-icons:edit'></iron-icon>
              <div>Design</div></div>
          </iron-selector>
          </app-toolbar>
        </app-header>
        
        <iron-pages selected="[[page]]" attr-for-selected='page' fallback-selection='overview'>
          <tablet-overview page='overview'></tablet-overview>
          <tablet-library page='library'></tablet-library>
          <tablet-design page='design'></tablet-design>
        </iron-pages>
        
      </app-header-layout>
    
  </template>

  <script>
    class TabletPage extends Polymer.Element {
      static get is() { return 'tablet-page'; }
      static get properties() {
        return {
          routeData: Object,
          route: Object,
          page: String
        };
      }
      static get observers() {
        return [
          '_gotoPage(page)',
          '_setPage(routeData.page)'
        ];
      }
      _setPage(page) {
        this.page = page || 'overview';
      }
      _gotoPage(page) {
        (page) ? page : 'overview';
        window.location = `#/tablet/${page}`;
      }
      
    }

    window.customElements.define(TabletPage.is, TabletPage);
  </script>
</dom-module>
