
<script src="../../node_modules/redux/dist/redux.js"></script>

<link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">
<link rel="import" href="../data/coating-pan-class.html">
<link rel="import" href="../data/coating-formula-class.html">
<link rel="import" href="../data/tablet-class.html">
<link rel="import" href="../data/batch-class.html">

<script>
  
  
    const initialPan = {
        panDiameter: 1.2192,
        openingDiameter: 0.4826,
        wallWidth: 0.508,
        brimWidth: 0.93345,
        model: "Fastcoat",
        manufacturer: "O'Hara",
        nickname: "O'Hara Fastcoat 48\" Room",
        company: 'Colorcon',
        locationName: 'Harlyesville, PA',
        baffleType: 'Ploughshare',
        baffleCount: '4',
        baffleHeight: '',
        gunMake: 'Schlick',
        gunModel: '930',
        gunCount: '3',
        gunToGunDistance: '0.1524',
        maxAirflow: '2000',
        perforations: 'Fully',
        firebaseKey: ''
    };
    
    // create an initial state 
    const initialState = {
        isAdmin: false,
        pan: new CoatingPan(initialPan),                    /*global CoatingPan*/
        tablet: new Tablet(),                       /*global Tablet*/
        coatingFormula: new CoatingFormula()        /*global CoatingFormula*/
    };
    
    
    // const storedState = JSON.parse(sessionStorage.getItem('coating-toolbox-state'));
    // let startState = storedState || initialState;
    
    // create a reducer for actions
    const reducer = (state = initialState, action) => {
        let newState = Object.assign({}, state);
        switch(action.type) {
            case "SET_ADMIN":
                newState.isAdmin = action.value;
                break;
            case "LOAD_TABLET":
                newState.tablet = action.value;
                break;
            case "CALCULATE_PAN":
                newState.pan = new CoatingPan(action.value);
                break;
            case "LOAD_COATING_FORMULA":
                newState.coatingFormula = action.value;
                break;
        }
        // sessionStorage.setItem('coating-toolbox-state', JSON.stringify(newState));
        return newState;
    };
    
    // create the redux store
    /* global Redux */
    const store = Redux.createStore(reducer);
    
    // pass the redux store to the PolymerRedux to create a mixing which is used with other polymer elements
    /* global PolymerRedux*/
    const ReduxMixin = PolymerRedux(store);
    
</script>

